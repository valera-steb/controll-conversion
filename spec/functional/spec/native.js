/**
 * Created by steb on 19.02.2015.
 */
feature('отправка запроса', 'нативная реализация')
    .add(scenario('обычная')
        .given('инициализированный объект')
        .when('ввели урл "123"')
        .then('урл будет "123"')
        .and('пошла загрузка')
).use('отправка запроса background')

    .add(scenario('во время запроса')
        .given('инициализированный объект')
        .when('ввели урл "123"')
        .and('ввели урл "4"')
        .then('урл будет "123"')
).use('отправка запроса background');

feature('запрос на сервер', 'нативная реализация')
    .add(scenario('с ответом от сервера')
        .given('ввели урл "123"')
        .when('сервер _ответил с данными_')
        .then('запрос закончен _с данными_')
)
    .add(scenario('с отказом от сервера')
        .given('ввели урл "123"')
        .when('сервер _отклонил_')
        .then('запрос закончен _без данных_')
);

feature('отмена отправленного запроса_', 'нативная реализация')
    .add(scenario('запрос отмены клиентом')
        .given('инициализированный объект')
        .when('ввели урл "123"')
        .and('клиент отменил запрос')
        .then('уточнён статус - ещё и отменяем')
        .and('в моделе сервера _открыт_ доступ к диалогу отмены')
)
    .add(scenario('_подтвержденая сервером')
        .given('инициализированный объект')
        .when('ввели урл "123"')
        .and('клиент отменил запрос')
        .and('сервер _подтвердил_ отмену')
        .then('запрос закончен _без данных_')
)
    .add(scenario('_отклоненая сервером')
        .given('инициализированный объект')
        .when('ввели урл "123"')
        .and('клиент отменил запрос')
        .and('сервер _отклонил_ отмену')
        .then('запрос доступен для отмены')
        .and('в моделе сервера _закрыт_ доступ к диалогу отмены')
)
    .add(scenario('_отклонённая сервером отправкой данных')
        .given('инициализированный объект')
        .when('ввели урл "123"')
        .and('клиент отменил запрос')
        .and('сервер _ответил с данными_')
        .then('запрос закончен _с данными_')
)
    .add(scenario('_отклонённая сервером отменой запроса')
        .given('инициализированный объект')
        .when('ввели урл "123"')
        .and('клиент отменил запрос')
        .and('сервер _отклонил_')
        .then('запрос закончен _без данных_')
);

feature('отпадание сервера', 'нативная реализация')
    .add(scenario('во время загрузки')
        .given('инициализированный объект')
        .when('ввели урл "123"')
        .and('сервер _отпал_')
        //TODO: а подойдёт ли эта проверка?
        .then('запрос закончен _без данных_')
).use('отправка запроса background')

    .add(scenario('во время отмены запроса')
        .given('инициализированный объект')
        .when('ввели урл "123"')
        .and('клиент отменил запрос')
        .and('сервер _отпал_')
        //TODO: а подойдёт ли эта проверка?
        .then('запрос закончен _без данных_')
).use('отправка запроса background')

    .add(scenario('возвращение сервера')
        .given('инициализированный объект')
        .and('сервер _отпал_')
        .when('сервер _вернулся_')
        .and('ввели урл "123"')
        .then('урл будет "123"')
        .and('пошла загрузка')
).use('отправка запроса background');
